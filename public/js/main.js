// Generated by CoffeeScript 1.3.3
$(function() {
  var jPlayerDiv, playSong, setSoundCloudLink, setTitle;

  console.log("IN MAIN");

  $('#jp-no-solution-wrapper').hide();

  setTitle = function(title) {
    return $('#jp-title-text').html(title);
  };

  setSoundCloudLink = function(url) {
    if (!url) {
      return $('#soundCloudLink').hide();
    } else {
      $('#soundCloudLink').show();
      return $('#soundCloudLink').html('<a href="' + url + '"  target="_blank" id="asdf"> <img src="/images/soundcloud.png"/> </a>');
    }
  };

  jPlayerDiv = $("#jquery_jplayer_1");

  jPlayerDiv.jPlayer({
    ready: function() {},
    supplied: 'mp3',
    wmode: 'window'
  });

  playSong = function(songUrl, songTitle, soundCloudUrl, dontStartPlaying) {
    if (dontStartPlaying) {
      jPlayerDiv.jPlayer("setMedia", {
        mp3: songUrl
      }).jPlayer();
    } else {
      jPlayerDiv.jPlayer("setMedia", {
        mp3: songUrl
      }).jPlayer('play');
    }
    setTitle(songTitle);
    return setSoundCloudLink(soundCloudUrl);
  };

  $('.playableSong').click(function(e) {
    var songDiv, songTitle, songUrl, soundCloudUrl;
    songDiv = $(this);
    songUrl = songDiv.attr('url');
    songTitle = songDiv.attr('title');
    soundCloudUrl = songDiv.attr('soundCloudUrl');
    return playSong(songUrl, songTitle, soundCloudUrl);
  });

  playSong('https://s3.amazonaws.com/jvkoh-music/floatintheocean.mp3', 'Float in the Ocean', '', true);

  $('#soundCloudLink').css({
    position: 'relative',
    left: 45,
    top: 8
  }).show();

  setTimeout(function() {
    return $('#jp-no-solution-wrapper').show();
  }, 5000);

});
